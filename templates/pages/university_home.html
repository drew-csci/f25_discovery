{% extends "base.html" %} {% block title %}University Dashboard - Discovery
Hub{% endblock %} {% block body_class %}university-home-page{% endblock %} {#
Add a specific class to the body for this page #} {% block extra_head_styles %}
<style>
  /* Adjust header padding to make space for the hamburger menu */
  .university-home-page .site-header .container.header-inner {
    padding-left: 70px; /* Adjust based on hamburger menu size and position */
  }

  /* Adjust main content padding to make space for the hamburger menu */
  .university-home-page #main-content .container {
    padding-left: 70px; /* Same padding as header */
  }

  /* Ensure hamburger menu is always on top */
  .hamburger-menu {
    z-index: 1060; /* Higher than header's assumed z-index */
  }

  /* When sidebar is active, remove the static padding, as main-content already shifts */
  .content-shifted #main-content .container {
    padding-left: 15px; /* Default container padding, assuming ~15px on each side */
  }

  /* When sidebar is active, adjust header padding */
  .content-shifted .site-header .container.header-inner {
    padding-left: 15px; /* Default container padding */
  }
</style>
{% endblock %} {% block content %}
<div class="page-wrapper">
  <div class="hamburger-menu" onclick="toggleSidebar()">
    &#9776;
    <!-- Hamburger icon -->
  </div>

  <div class="sidebar-container" id="sidebar">
    <nav class="sidebar">
      <div class="sidebar-header">
        <h3>Discovery Hub</h3>
        <button class="close-sidebar" onclick="toggleSidebar()">X</button>
      </div>
      <ul class="sidebar-menu">
        <li><a href="{% url 'university_home' %}">Dashboard</a></li>
        <li><a href="#">My Profile</a></li>
        <li><a href="#">Settings</a></li>
      </ul>
    </nav>
  </div>

  <div class="main-content" id="main-content">
    <div class="container">
      <h1>Welcome, {{ university_name }}</h1>
      <p class="muted">
        Here's your dashboard with the latest updates and opportunities.
      </p>

      <div class="tab-buttons">
        <button
          class="btn tab-button active"
          onclick="showScreen('other-universities-research')"
        >
          Other Universities Research
        </button>
        <button
          class="btn tab-button"
          onclick="showScreen('engagement-analytics')"
        >
          Engagement Analytics
        </button>
        <button
          class="btn tab-button"
          onclick="showScreen('recent-patents-funding')"
        >
          Recent Patents/Funding by Industry
        </button>
      </div>

      <!-- Search bar moved here, directly below tab buttons -->
      <div class="dash-card search-bar-card">
        <h2>Find Companies</h2>
        <p class="muted">
          Search for companies that invest in research or patents.
        </p>
        <form
          method="get"
          action="{% url 'university_home' %}"
          class="search-form"
        >
          <input
            type="text"
            name="q"
            value="{{ current_query }}"
            placeholder="Search by name, focus area (e.g., AI, Patents)..."
          />
          <button type="submit" class="btn">Search</button>
        </form>
      </div>

      <div id="other-universities-research" class="screen-content">
        <div class="dash-card">
          <h2>Other Universities Research</h2>
          <div class="item-list">
            {% for project in research_projects %}
            <div class="list-item">
              <div class="tags-container">
                {% if project.field %}
                <span class="tag">{{ project.field }}</span>
                {% else %}
                <span class="tag">General Research</span>
                {% endif %}
              </div>
              <h3>{{ project.title }}</h3>
              <p>
                {{ project.description|default:"No description provided." }}
              </p>
              <div class="metadata">
                {# Additional metadata can go here if needed #}
              </div>
            </div>
            {% empty %}
            <p>No research projects from other universities found.</p>
            {% endfor %}
          </div>
        </div>
      </div>

      <div
        id="engagement-analytics"
        class="screen-content"
        style="display: none"
      >
        <div class="dash-card">
          <h2>Engagement Analytics</h2>
          <p>
            This section will display analytics related to engagement with
            companies and other universities.
          </p>
          <div
            class="analytics-chart-placeholder"
            style="
              height: 200px;
              background-color: #f0f0f0;
              border-radius: 8px;
              display: flex;
              align-items: center;
              justify-content: center;
              color: #888;
            "
          >
            [Chart Placeholder]
          </div>
          <p>
            Metrics such as connection requests, successful collaborations, and
            interest levels will be shown here.
          </p>
        </div>
      </div>

      <div
        id="recent-patents-funding"
        class="screen-content"
        style="display: none"
      >
        <div class="dash-card">
          <h2>Recent Patents &amp; Funding by Industry</h2>
          <div class="item-list">
            {% for update in funding_updates %}
            <div class="list-item">
              <div class="tags-container">
                {% if update.industry %}
                <span class="tag">{{ update.industry }}</span>
                {% elif update.field %}
                <span class="tag">{{ update.field }}</span>
                {% else %}
                <span class="tag">General</span>
                {% endif %}
              </div>
              <h3>{{ update.title }}</h3>
              <p>{{ update.description }}</p>
              <div class="metadata">
                <span class="muted-text">{{ update.date_posted }}</span>
              </div>
            </div>
            {% empty %}
            <p>No recent patents or funding found by industry.</p>
            {% endfor %}
          </div>
        </div>
      </div>

      <!-- Removed the "Find Companies" card and its content from here -->
      <!-- The content of the 'company-list' div is entirely removed as requested -->
    </div>
    <!-- /container -->
  </div>
  <!-- /main-content -->
</div>
<!-- /page-wrapper -->

<script>
  function showScreen(screenId) {
    document.querySelectorAll(".screen-content").forEach(function (screen) {
      screen.style.display = "none";
    });

    document.getElementById(screenId).style.display = "block";

    document.querySelectorAll(".tab-button").forEach(function (button) {
      button.classList.remove("active");
    });
    document
      .querySelector(`.tab-button[onclick*="${screenId}"]`)
      .classList.add("active");
  }

  function toggleSidebar() {
    const sidebar = document.getElementById("sidebar");
    const mainContent = document.getElementById("main-content");
    sidebar.classList.toggle("active");
    mainContent.classList.toggle("content-shifted");
  }

  document.addEventListener("DOMContentLoaded", function () {
    showScreen("other-universities-research");
  });
</script>

<style>
  /* New styles for sidebar */
  .page-wrapper {
    display: flex;
    min-height: 100vh; /* Ensure it takes full viewport height */
  }

  .hamburger-menu {
    position: fixed;
    top: 20px;
    left: 20px;
    font-size: 2em;
    cursor: pointer;
    z-index: 1050; /* Above sidebar */
    color: #007bff; /* Match primary button color */
  }

  .sidebar-container {
    width: 0;
    overflow: hidden;
    transition: width 0.3s ease-in-out;
    background-color: #f8f9fa; /* Light background for sidebar */
    box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    position: fixed;
    height: 100%;
    top: 0;
    left: 0;
    z-index: 1000;
    display: flex; /* For vertical alignment of content */
    flex-direction: column;
  }

  .sidebar-container.active {
    width: 250px; /* Width when active */
  }

  .sidebar {
    padding: 20px;
    flex-grow: 1; /* Allows content to expand */
    display: flex;
    flex-direction: column;
  }

  .sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid #dee2e6;
  }

  .sidebar-header h3 {
    margin: 0;
    color: #343a40;
  }

  .close-sidebar {
    background: none;
    border: none;
    font-size: 1.5em;
    cursor: pointer;
    color: #6c757d;
  }

  .sidebar-menu {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .sidebar-menu li {
    margin-bottom: 10px;
  }

  .sidebar-menu a {
    text-decoration: none;
    color: #495057;
    font-size: 1.1em;
    display: block;
    padding: 8px 10px;
    border-radius: 5px;
    transition: background-color 0.2s ease;
  }

  .sidebar-menu a:hover {
    background-color: #e9ecef;
    color: #0056b3; /* Darker blue on hover */
  }

  .main-content {
    flex-grow: 1;
    margin-left: 0; /* Default: no shift */
    transition: margin-left 0.3s ease-in-out;
    padding-top: 20px; /* Add some padding at the top for the hamburger button */
    width: 100%; /* Take full width initially */
  }

  .main-content.content-shifted {
    margin-left: 250px; /* Shift content when sidebar is active */
  }

  /* Styles for dash-card elements */
  .dash-card {
    background-color: #ffffff;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    padding: 32px; /* Increased padding to create more space around internal content */
    margin-bottom: 30px;
    border: 1px solid #e0e0e0; /* Subtle border */
  }

  .dash-card h2 {
    color: #343a40;
    font-size: 1.8em;
    margin-top: 0;
    margin-bottom: 15px;
    border-bottom: 1px solid #eeeeee;
    padding-bottom: 10px;
  }

  .dash-card p.muted {
    color: #6c757d;
    font-size: 1em;
    margin-bottom: 20px;
  }

  /* Search form specific styles */
  .search-form {
    display: flex;
    gap: 10px;
    margin-top: 20px;
  }

  .search-form input[type="text"] {
    flex-grow: 1;
    padding: 12px 15px;
    border: 1px solid #ced4da;
    border-radius: 6px;
    font-size: 1em;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
  }

  .search-form input[type="text"]::placeholder {
    color: #adb5bd;
  }

  .search-form input[type="text"]:focus {
    border-color: #80bdff;
    outline: 0;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
  }

  .search-form .btn {
    padding: 12px 20px;
    font-size: 1em;
    border-radius: 6px;
    background-color: #007bff;
    color: white;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .search-form .btn:hover {
    background-color: #0056b3;
  }

  /* Item list styling within dash-card */
  .item-list {
    display: grid;
    gap: 20px; /* Space between list items */
    margin-top: 20px;
  }

  .list-item {
    background-color: #f8f9fa;
    border: 1px solid #e9ecef;
    border-left: 4px solid #dee2e6;
    border-radius: 8px;
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 10px; /* Adds consistent spacing between all internal elements */
  }
  .list-item:hover {
    transform: translateY(-2px); /* Slightly less aggressive lift on hover */
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12); /* More prominent shadow for hover, similar to shadow-lg */
    border-left-color: #007bff; /* Highlight with primary color on hover */
  }
  .list-item h3 {
    margin: 0;
    padding: 0;
    line-height: 1.35;
    font-size: 1.25em;
    color: #1e293b;
  }

  .list-item p {
    margin: 0;
    font-size: 0.95em;
    line-height: 1.55;
    color: #374151;
  }

  .list-item .tags-container {
    margin-bottom: 12px; /* Space below tags, before title */
    display: flex;
    flex-wrap: wrap; /* Allow tags to wrap */
    gap: 8px; /* Space between tags */
  }

  .list-item .tag {
    background-color: #cfe2ff; /* Lighter blue, aligned with primary theme */
    color: #0056b3; /* Darker blue text for contrast */
    font-weight: 500; /* Tailwind font-medium */
    padding: 4px 10px; /* Tailwind py-1 px-3 equivalent, adjusted */
    border-radius: 9999px; /* Pill-shaped tags (Tailwind rounded-full) */
    font-size: 0.85em; /* Tailwind text-sm equivalent */
    white-space: nowrap; /* Prevent tag text from wrapping */
  }

  .list-item .metadata {
    margin-top: auto;
    display: flex;
    align-items: center;
  }

  .list-item .muted-text {
    color: #6b7280;
    font-size: 0.9em;
  }

  /* Original styles, ensure they are kept */
  .tab-buttons {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-wrap: wrap; /* Allow buttons to wrap on smaller screens */
  }

  .tab-button {
    background-color: #e0e0e0; /* Light grey, consistent with existing muted tones */
    color: #333;
    border: none;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1em;
    transition: background-color 0.3s ease, color 0.3s ease;
    white-space: nowrap; /* Prevent button text from wrapping */
  }

  .tab-button:hover {
    background-color: #d0d0d0;
  }

  .tab-button.active {
    background-color: #007bff; /* Primary blue, assuming it's used for action buttons */
    color: white;
    font-weight: bold;
  }
</style>
{% endblock %}
